<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Chatterbox Lorenzo Gazzella 546890: gestioneRichieste.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Chatterbox Lorenzo Gazzella 546890
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">gestioneRichieste.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Contiene l'implementazione di tutti i metodi per la gestione delle singole operazioni che il server gestisce. Constiene inoltre alcune funzioni di utilità utilizzate nel corpo delle funzione per gestire le richieste. Si dichiara che il contenuto di questo file e' in ogni sua parte opera originale dell'autore.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="gestione_richieste_8h_source.html">gestioneRichieste.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for gestioneRichieste.c:</div>
<div class="dyncontent">
<div class="center"><img src="gestione_richieste_8c__incl.png" border="0" usemap="#gestione_richieste_8c" alt=""/></div>
<!-- MAP 0 -->
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aea85560fdb24ac34b39c6014c25b5ab2"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gestione_richieste_8c.html#aea85560fdb24ac34b39c6014c25b5ab2">makeListUsr</a> ()</td></tr>
<tr class="memdesc:aea85560fdb24ac34b39c6014c25b5ab2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funzione che restiruisce la lista degli utenti connessi.  <a href="#aea85560fdb24ac34b39c6014c25b5ab2">More...</a><br /></td></tr>
<tr class="separator:aea85560fdb24ac34b39c6014c25b5ab2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed6092ef717047485c83a3abe299d1b5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gestione_richieste_8c.html#aed6092ef717047485c83a3abe299d1b5">registrato</a> (char *nickname)</td></tr>
<tr class="memdesc:aed6092ef717047485c83a3abe299d1b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funzione boolena che controlla s eun determinato nickname è presente nella hash table dei registrati.  <a href="#aed6092ef717047485c83a3abe299d1b5">More...</a><br /></td></tr>
<tr class="separator:aed6092ef717047485c83a3abe299d1b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad5e379113758e746716a81727902636"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmessage__t.html">message_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gestione_richieste_8c.html#aad5e379113758e746716a81727902636">copyMessage</a> (<a class="el" href="structmessage__t.html">message_t</a> m)</td></tr>
<tr class="memdesc:aad5e379113758e746716a81727902636"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funzione che esegue la copia di un messaggio.  <a href="#aad5e379113758e746716a81727902636">More...</a><br /></td></tr>
<tr class="separator:aad5e379113758e746716a81727902636"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a063bf005b990deb8193ae41b56a4955a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gestione_richieste_8c.html#a063bf005b990deb8193ae41b56a4955a">getUsrNickname</a> (char *nickname)</td></tr>
<tr class="memdesc:a063bf005b990deb8193ae41b56a4955a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funzione che restituisce la posizione di un nickname all'interno dell'array dei connessi.  <a href="#a063bf005b990deb8193ae41b56a4955a">More...</a><br /></td></tr>
<tr class="separator:a063bf005b990deb8193ae41b56a4955a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e3c0ed150e76c0c8ee0a7d49da72c70"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gestione_richieste_8c.html#a8e3c0ed150e76c0c8ee0a7d49da72c70">getUsrFd</a> (long fd)</td></tr>
<tr class="memdesc:a8e3c0ed150e76c0c8ee0a7d49da72c70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funzione che restituisce la posizione di un fd all'interno dell'array dei connessi.  <a href="#a8e3c0ed150e76c0c8ee0a7d49da72c70">More...</a><br /></td></tr>
<tr class="separator:a8e3c0ed150e76c0c8ee0a7d49da72c70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46f5335fac8b81da30af7aaa196beea1"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gestione_richieste_8c.html#a46f5335fac8b81da30af7aaa196beea1">getOnlyFileName</a> (char *path)</td></tr>
<tr class="memdesc:a46f5335fac8b81da30af7aaa196beea1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funzione che dato un path, restituisce il nome del file associato al path.  <a href="#a46f5335fac8b81da30af7aaa196beea1">More...</a><br /></td></tr>
<tr class="separator:a46f5335fac8b81da30af7aaa196beea1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e05b770e237a58c677fde0a96aff694"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gestione_richieste_8c.html#a7e05b770e237a58c677fde0a96aff694">getPosizioneLibera</a> ()</td></tr>
<tr class="memdesc:a7e05b770e237a58c677fde0a96aff694"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funzione che restituisce prima posizione libera all'interno dell'array dei connessi.  <a href="#a7e05b770e237a58c677fde0a96aff694">More...</a><br /></td></tr>
<tr class="separator:a7e05b770e237a58c677fde0a96aff694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25c2822a5b02b73d5423615ed1c06f20"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gestione_richieste_8c.html#a25c2822a5b02b73d5423615ed1c06f20">register_op</a> (long fd, <a class="el" href="structmessage__t.html">message_t</a> m)</td></tr>
<tr class="memdesc:a25c2822a5b02b73d5423615ed1c06f20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funzione che gestisce la richiesta di registrazione di un client. Il client verrà automaticamente connesso e riceverà la lista degli utenti online.  <a href="#a25c2822a5b02b73d5423615ed1c06f20">More...</a><br /></td></tr>
<tr class="separator:a25c2822a5b02b73d5423615ed1c06f20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a379adb31da260c88051f5b11d0a9a6d6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gestione_richieste_8c.html#a379adb31da260c88051f5b11d0a9a6d6">connect_op</a> (long fd, <a class="el" href="structmessage__t.html">message_t</a> m, int atomica)</td></tr>
<tr class="memdesc:a379adb31da260c88051f5b11d0a9a6d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funzione che gestisce la richiesta di connessione di un client. Il client riceverà automaticamente la lista degli utenti online.  <a href="#a379adb31da260c88051f5b11d0a9a6d6">More...</a><br /></td></tr>
<tr class="separator:a379adb31da260c88051f5b11d0a9a6d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed4f52e3a3c624d8f7f7fc734289f5c9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gestione_richieste_8c.html#aed4f52e3a3c624d8f7f7fc734289f5c9">usrlist_op</a> (long fd, <a class="el" href="structmessage__t.html">message_t</a> m, int atomica)</td></tr>
<tr class="memdesc:aed4f52e3a3c624d8f7f7fc734289f5c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funzione che invia la lista degli utenti connessi al client che ne fa richiesta.  <a href="#aed4f52e3a3c624d8f7f7fc734289f5c9">More...</a><br /></td></tr>
<tr class="separator:aed4f52e3a3c624d8f7f7fc734289f5c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81614c50af29bdf3938aa45aec62d139"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gestione_richieste_8c.html#a81614c50af29bdf3938aa45aec62d139">unregister_op</a> (long fd, <a class="el" href="structmessage__t.html">message_t</a> m)</td></tr>
<tr class="memdesc:a81614c50af29bdf3938aa45aec62d139"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funzione che gestisce la richiesta di deregistrazione da parte di un client.  <a href="#a81614c50af29bdf3938aa45aec62d139">More...</a><br /></td></tr>
<tr class="separator:a81614c50af29bdf3938aa45aec62d139"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc40e1f89d52de70e54517e41ed6793e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gestione_richieste_8c.html#acc40e1f89d52de70e54517e41ed6793e">disconnect_op</a> (long fd)</td></tr>
<tr class="memdesc:acc40e1f89d52de70e54517e41ed6793e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funzione che gestisce la richiesta di disconnessione da parte di un client.  <a href="#acc40e1f89d52de70e54517e41ed6793e">More...</a><br /></td></tr>
<tr class="separator:acc40e1f89d52de70e54517e41ed6793e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e28c89434bfa2111b1ad2bae0dfbbdd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gestione_richieste_8c.html#a0e28c89434bfa2111b1ad2bae0dfbbdd">posttxt_op</a> (long fd, <a class="el" href="structmessage__t.html">message_t</a> m)</td></tr>
<tr class="memdesc:a0e28c89434bfa2111b1ad2bae0dfbbdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funzione che gestisce la richiesta di invio di un messaggio da parte di un client a un altro. Il messaggio sarà inviato direttamente al client destinatario nel caso in cui sia connesso. In ogni caso il messaggio verrà aggiunto alla history del client destinatario.  <a href="#a0e28c89434bfa2111b1ad2bae0dfbbdd">More...</a><br /></td></tr>
<tr class="separator:a0e28c89434bfa2111b1ad2bae0dfbbdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af861d94ca1c51d1e273d1103b1367bf1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gestione_richieste_8c.html#af861d94ca1c51d1e273d1103b1367bf1">getprevmsgs_op</a> (long fd, <a class="el" href="structmessage__t.html">message_t</a> m)</td></tr>
<tr class="memdesc:af861d94ca1c51d1e273d1103b1367bf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funzione che gestisce l'invio della history relativa al client che ne ha fatto richiesta.  <a href="#af861d94ca1c51d1e273d1103b1367bf1">More...</a><br /></td></tr>
<tr class="separator:af861d94ca1c51d1e273d1103b1367bf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b26ca960f1032ffec7b5f14a5a011a5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gestione_richieste_8c.html#a3b26ca960f1032ffec7b5f14a5a011a5">posttxtall_op</a> (long fd, <a class="el" href="structmessage__t.html">message_t</a> m)</td></tr>
<tr class="memdesc:a3b26ca960f1032ffec7b5f14a5a011a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funzione che gestisce la richiesta da parte di un client dell'invio a tutti gli utenti registrati di un certo messaggio. L'invio del messaggio segue le stesse regole della funzione posttxt_op.  <a href="#a3b26ca960f1032ffec7b5f14a5a011a5">More...</a><br /></td></tr>
<tr class="separator:a3b26ca960f1032ffec7b5f14a5a011a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b0c5d59733a6f35eb9d60f1f7019c31"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gestione_richieste_8c.html#a7b0c5d59733a6f35eb9d60f1f7019c31">postfile_op</a> (long fd, <a class="el" href="structmessage__t.html">message_t</a> m)</td></tr>
<tr class="memdesc:a7b0c5d59733a6f35eb9d60f1f7019c31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funzione che gestisce la richiesta di invio di un file da parte di un client a un altro. Il client destinatario sarà notificato nel caso in cui sia connesso. In ogni caso verrà aggiunto alla history del client destinatario il nome del file.  <a href="#a7b0c5d59733a6f35eb9d60f1f7019c31">More...</a><br /></td></tr>
<tr class="separator:a7b0c5d59733a6f35eb9d60f1f7019c31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb730bea65801751de444bbb5125c510"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gestione_richieste_8c.html#adb730bea65801751de444bbb5125c510">getfile_op</a> (long fd, <a class="el" href="structmessage__t.html">message_t</a> m)</td></tr>
<tr class="memdesc:adb730bea65801751de444bbb5125c510"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funzione che gestisce la richiesta da parte di un client del download di un file.  <a href="#adb730bea65801751de444bbb5125c510">More...</a><br /></td></tr>
<tr class="separator:adb730bea65801751de444bbb5125c510"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contiene l'implementazione di tutti i metodi per la gestione delle singole operazioni che il server gestisce. Constiene inoltre alcune funzioni di utilità utilizzate nel corpo delle funzione per gestire le richieste. Si dichiara che il contenuto di questo file e' in ogni sua parte opera originale dell'autore. </p>
<dl class="section author"><dt>Author</dt><dd>Lorenzo Gazzella 546890 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a379adb31da260c88051f5b11d0a9a6d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a379adb31da260c88051f5b11d0a9a6d6">&#9670;&nbsp;</a></span>connect_op()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int connect_op </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmessage__t.html">message_t</a>&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>atomica</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funzione che gestisce la richiesta di connessione di un client. Il client riceverà automaticamente la lista degli utenti online. </p>
<p>connect_op </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>Fd del client che sta facendo la richiesta </td></tr>
    <tr><td class="paramname">m</td><td>Messaggio inviato dal client </td></tr>
    <tr><td class="paramname">atomica</td><td>Variabile booleana. Deve valere 1 se si invoca con la lock sulla hash degli utenti registrati, 0 altirmenti.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 in caso di successo -1 in caso di errore </dd></dl>

</div>
</div>
<a id="aad5e379113758e746716a81727902636"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad5e379113758e746716a81727902636">&#9670;&nbsp;</a></span>copyMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmessage__t.html">message_t</a> * copyMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmessage__t.html">message_t</a>&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funzione che esegue la copia di un messaggio. </p>
<p>copyMessage </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Messaggio da copiare</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nuovo messaggio in caso di successo. NULL altrimenti </dd></dl>

</div>
</div>
<a id="acc40e1f89d52de70e54517e41ed6793e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc40e1f89d52de70e54517e41ed6793e">&#9670;&nbsp;</a></span>disconnect_op()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int disconnect_op </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funzione che gestisce la richiesta di disconnessione da parte di un client. </p>
<p>register_op </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>Fd del client che sta facendo la richiesta </td></tr>
    <tr><td class="paramname">m</td><td>Messaggio inviato dal client</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 in caso di successo -1 in caso di errore </dd></dl>

</div>
</div>
<a id="adb730bea65801751de444bbb5125c510"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb730bea65801751de444bbb5125c510">&#9670;&nbsp;</a></span>getfile_op()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getfile_op </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmessage__t.html">message_t</a>&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funzione che gestisce la richiesta da parte di un client del download di un file. </p>
<p>getfile_op </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>Fd del client che sta facendo la richiesta </td></tr>
    <tr><td class="paramname">m</td><td>Messaggio inviato dal client</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 in caso di successo -1 in caso di errore </dd></dl>

</div>
</div>
<a id="a46f5335fac8b81da30af7aaa196beea1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46f5335fac8b81da30af7aaa196beea1">&#9670;&nbsp;</a></span>getOnlyFileName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * getOnlyFileName </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funzione che dato un path, restituisce il nome del file associato al path. </p>
<p>getOnlyFileName </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Path da controllare</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nome del file associato al path </dd></dl>

</div>
</div>
<a id="a7e05b770e237a58c677fde0a96aff694"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e05b770e237a58c677fde0a96aff694">&#9670;&nbsp;</a></span>getPosizioneLibera()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getPosizioneLibera </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funzione che restituisce prima posizione libera all'interno dell'array dei connessi. </p>
<p>getPosizioneLibera </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>fd da cercare</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>La posizone in caso di successo. -1 altrimenti </dd></dl>

</div>
</div>
<a id="af861d94ca1c51d1e273d1103b1367bf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af861d94ca1c51d1e273d1103b1367bf1">&#9670;&nbsp;</a></span>getprevmsgs_op()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getprevmsgs_op </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmessage__t.html">message_t</a>&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funzione che gestisce l'invio della history relativa al client che ne ha fatto richiesta. </p>
<p>getprevmsgs_op </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>Fd del client che sta facendo la richiesta </td></tr>
    <tr><td class="paramname">m</td><td>Messaggio inviato dal client</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 in caso di successo -1 in caso di errore </dd></dl>

</div>
</div>
<a id="a8e3c0ed150e76c0c8ee0a7d49da72c70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e3c0ed150e76c0c8ee0a7d49da72c70">&#9670;&nbsp;</a></span>getUsrFd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getUsrFd </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funzione che restituisce la posizione di un fd all'interno dell'array dei connessi. </p>
<p>getUsrFd </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>fd da cercare</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Se esiste un utente connesso con quel fd, restituisce la sua posizone. -1 altrimenti </dd></dl>

</div>
</div>
<a id="a063bf005b990deb8193ae41b56a4955a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a063bf005b990deb8193ae41b56a4955a">&#9670;&nbsp;</a></span>getUsrNickname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getUsrNickname </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>nickname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funzione che restituisce la posizione di un nickname all'interno dell'array dei connessi. </p>
<p>getUsrNickname </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nickname</td><td>Nickname da cercare</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Se esiste un utente connesso con quel nickname, restituisce la sua posizone. -1 altrimenti </dd></dl>

</div>
</div>
<a id="aea85560fdb24ac34b39c6014c25b5ab2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea85560fdb24ac34b39c6014c25b5ab2">&#9670;&nbsp;</a></span>makeListUsr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * makeListUsr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funzione che restiruisce la lista degli utenti connessi. </p>
<p>makeListUsr </p><dl class="section return"><dt>Returns</dt><dd>Lista utenti connessi </dd></dl>

</div>
</div>
<a id="a7b0c5d59733a6f35eb9d60f1f7019c31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b0c5d59733a6f35eb9d60f1f7019c31">&#9670;&nbsp;</a></span>postfile_op()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int postfile_op </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmessage__t.html">message_t</a>&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funzione che gestisce la richiesta di invio di un file da parte di un client a un altro. Il client destinatario sarà notificato nel caso in cui sia connesso. In ogni caso verrà aggiunto alla history del client destinatario il nome del file. </p>
<p>postfile_op </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>Fd del client che sta facendo la richiesta </td></tr>
    <tr><td class="paramname">m</td><td>Messaggio inviato dal client</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 in caso di successo -1 in caso di errore </dd></dl>

</div>
</div>
<a id="a0e28c89434bfa2111b1ad2bae0dfbbdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e28c89434bfa2111b1ad2bae0dfbbdd">&#9670;&nbsp;</a></span>posttxt_op()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int posttxt_op </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmessage__t.html">message_t</a>&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funzione che gestisce la richiesta di invio di un messaggio da parte di un client a un altro. Il messaggio sarà inviato direttamente al client destinatario nel caso in cui sia connesso. In ogni caso il messaggio verrà aggiunto alla history del client destinatario. </p>
<p>posttxt_op </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>Fd del client che sta facendo la richiesta </td></tr>
    <tr><td class="paramname">m</td><td>Messaggio inviato dal client</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 in caso di successo -1 in caso di errore </dd></dl>

</div>
</div>
<a id="a3b26ca960f1032ffec7b5f14a5a011a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b26ca960f1032ffec7b5f14a5a011a5">&#9670;&nbsp;</a></span>posttxtall_op()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int posttxtall_op </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmessage__t.html">message_t</a>&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funzione che gestisce la richiesta da parte di un client dell'invio a tutti gli utenti registrati di un certo messaggio. L'invio del messaggio segue le stesse regole della funzione posttxt_op. </p>
<p>posttxtall_op </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>Fd del client che sta facendo la richiesta </td></tr>
    <tr><td class="paramname">m</td><td>Messaggio inviato dal client</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 in caso di successo -1 in caso di errore </dd></dl>

</div>
</div>
<a id="a25c2822a5b02b73d5423615ed1c06f20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25c2822a5b02b73d5423615ed1c06f20">&#9670;&nbsp;</a></span>register_op()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int register_op </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmessage__t.html">message_t</a>&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funzione che gestisce la richiesta di registrazione di un client. Il client verrà automaticamente connesso e riceverà la lista degli utenti online. </p>
<p>register_op </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>Fd del client che sta facendo la richiesta </td></tr>
    <tr><td class="paramname">m</td><td>Messaggio inviato dal client</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 in caso di successo -1 in caso di errore </dd></dl>

</div>
</div>
<a id="aed6092ef717047485c83a3abe299d1b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed6092ef717047485c83a3abe299d1b5">&#9670;&nbsp;</a></span>registrato()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int registrato </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>nickname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funzione boolena che controlla s eun determinato nickname è presente nella hash table dei registrati. </p>
<p>registrato </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nickname</td><td>Nickname da controllare</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 nel caso in cui sia registrato. 0 altrimenti </dd></dl>

</div>
</div>
<a id="a81614c50af29bdf3938aa45aec62d139"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81614c50af29bdf3938aa45aec62d139">&#9670;&nbsp;</a></span>unregister_op()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int unregister_op </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmessage__t.html">message_t</a>&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funzione che gestisce la richiesta di deregistrazione da parte di un client. </p>
<p>register_op </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>Fd del client che sta facendo la richiesta </td></tr>
    <tr><td class="paramname">m</td><td>Messaggio inviato dal client</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 in caso di successo -1 in caso di errore </dd></dl>

</div>
</div>
<a id="aed4f52e3a3c624d8f7f7fc734289f5c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed4f52e3a3c624d8f7f7fc734289f5c9">&#9670;&nbsp;</a></span>usrlist_op()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int usrlist_op </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmessage__t.html">message_t</a>&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>atomica</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funzione che invia la lista degli utenti connessi al client che ne fa richiesta. </p>
<p>usrlist_op </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>Fd del client che sta facendo la richiesta </td></tr>
    <tr><td class="paramname">m</td><td>Messaggio inviato dal client </td></tr>
    <tr><td class="paramname">atomica</td><td>Variabile booleana. Deve valere 1 se si invoca con la lock sulla hash degli utenti registrati, con la lock sull'array degli utenti connessi e con la lock sull'fd, 0 altirmenti.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 in caso di successo -1 in caso di errore </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
